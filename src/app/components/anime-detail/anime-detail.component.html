<div *ngIf="isLoading" class="loading">Chargement...</div>

<div *ngIf="anime" class="anime-detail">
  <div class="anime-header">
    <img [src]="anime.images?.jpg?.image_url" [alt]="anime.title" />
    <div class="anime-info">
      <h2>{{ anime.title }}</h2>
      <p><strong>Score :</strong> ⭐ {{ anime.score }}</p>
      <p><strong>Popularité :</strong> {{ anime.popularity }}</p>
      <p><strong>Statut :</strong> {{ anime.status }}</p>
      <p><strong>Épisodes :</strong> {{ anime.episodes || "Non renseigné" }}</p>
      <p>
        <strong>Genres :</strong>
        <span *ngFor="let genre of anime.genres; let last = last">
          {{ genre.name }}{{ last ? "" : ", " }}
        </span>
      </p>
      <p>
        <strong>Sortie :</strong> {{ anime.aired?.from | date : "longDate" }}
      </p>
      <p *ngIf="anime.aired?.to">
        <strong>Fin :</strong> {{ anime.aired.to | date : "longDate" }}
      </p>
      <a [href]="anime.url" target="_blank" class="more-info"
        >Voir sur MyAnimeList</a
      >
    </div>
  </div>

  <div class="anime-synopsis">
    <h3>Synopsis</h3>
    <p *ngIf="anime.synopsis.length > 200">
      <strong>Synopsis:</strong>
      {{ anime.synopsis || "Aucun synopsis disponible." }}
    </p>
  </div>

  <div *ngIf="anime.trailer?.embed_url" class="anime-trailer">
    <h3>Bande-annonce</h3>
    <iframe
      [src]="anime.trailer.embed_url | safeUrl"
      frameborder="0"
      allowfullscreen
    ></iframe>
  </div>
</div>
